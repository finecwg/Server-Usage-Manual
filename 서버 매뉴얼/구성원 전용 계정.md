# 구성원 전용 계정

# 2.1.1. 구성원 전용 계정

이 문서에서는 서버의 사용자 계정 중 구성원 전용 계정의 생성 및 관리에 대해 자세히 다룹니다.
구성원 전용 계정은 서버에 대한 접근 권한이 있는 실제 사용자를 위한 계정으로,
각 사용자의 역할과 책임에 따라 적절한 권한을 부여하고 관리하는 것이 중요합니다.
체계적인 사용자 계정 관리는 서버 보안을 강화하고, 리소스 활용을 최적화하는 데 기여할 수 있습니다.

## 2.1.1.1. 계정 명명 규칙

- 사용자 계정 명명 규칙: 姓(영문) + 이름 첫 글자(영문)
    - 예: 김철수 -> kimcs, 이영희 -> leeyh
- UID (User ID) 할당 규칙: 4000번대 (4000 ~ 4999)
- GID (Group ID) 할당 규칙: 4000번대 (4000 ~ 4999)
- 홈 디렉토리 위치: /home/사용자명

구성원 전용 계정의 명명 규칙을 일관되게 적용하면 사용자 식별 및 관리가 용이해집니다.
위의 규칙에 따르면 사용자 계정은 '성+이름 첫 글자'의 형식으로 영문 소문자로 생성되며,
고유한 UID와 GID가 4000번대에서 할당됩니다.
사용자의 홈 디렉토리는 /home/사용자명 위치에 생성되어,
각 사용자의 개인 파일과 설정을 저장할 수 있도록 합니다.

## 2.1.1.2. 계정 생성 절차

1. useradd 명령을 사용하여 사용자 계정 생성:
    
    ```bash
    sudo useradd -m -u 4001 -g 4001 -s /bin/bash kimcs
    
    ```
    
    - m: 사용자의 홈 디렉토리 생성
    - u: 사용자의 UID 지정
    - g: 사용자의 GID (기본 그룹) 지정
    - s: 사용자의 로그인 셸 지정
2. passwd 명령을 사용하여 사용자의 비밀번호 설정:
    
    ```bash
    sudo passwd kimcs
    
    ```
    
3. chage 명령을 사용하여 비밀번호 만료 정책 설정:
    
    ```bash
    sudo chage -M 90 -m 7 -W 14 kimcs
    
    ```
    
    - M: 비밀번호 최대 사용 기간 (일)
    - m: 비밀번호 최소 사용 기간 (일)
    - W: 비밀번호 만료 경고 기간 (일)

위의 절차에 따라 'kimcs'라는 이름의 구성원 전용 계정을 생성하고,
적절한 UID와 GID를 할당하며, 비밀번호를 설정할 수 있습니다.
또한 chage 명령을 통해 비밀번호 만료 정책을 설정함으로써,
주기적인 비밀번호 변경을 유도하고 계정 보안을 강화할 수 있습니다.

## 2.1.1.3. 계정 권한 관리

- sudo 권한 부여:
    - 시스템 관리 업무를 수행하는 사용자에 한해 sudo 권한 부여
    - /etc/sudoers 파일 또는 /etc/sudoers.d/ 디렉토리의 파일을 통해 설정
    
    ```bash
    # /etc/sudoers 파일 편집
    sudo visudo
    
    # kimcs 사용자에게 sudo 권한 부여
    kimcs ALL=(ALL) ALL
    
    ```
    
- 그룹 할당을 통한 권한 관리:
    - 사용자의 역할 및 책임에 따라 적절한 그룹에 할당
    - 파일 및 디렉토리 접근 권한을 그룹 단위로 관리
    
    ```bash
    # 'developers' 그룹에 kimcs 사용자 추가
    sudo usermod -aG developers kimcs
    
    # /app 디렉토리의 소유 그룹을 'developers'로 변경하고, 그룹 쓰기 권한 부여
    sudo chown -R :developers /app
    sudo chmod -R g+w /app
    
    ```
    

구성원 전용 계정에 대한 권한 관리는 사용자의 역할과 책임에 따라 차등적으로 이루어져야 합니다.
시스템 관리 업무를 수행하는 사용자에게는 제한적으로 sudo 권한을 부여하여,
필요한 관리 작업을 수행할 수 있도록 합니다.
또한 사용자를 적절한 그룹에 할당하고, 해당 그룹에 대한 파일 및 디렉토리 접근 권한을 관리함으로써,
업무에 필요한 리소스에 대한 접근을 제어할 수 있습니다.

## 2.1.1.4. 계정 모니터링 및 관리

- 로그인 기록 모니터링:
    - last 명령을 사용하여 사용자별 로그인 기록 확인
    - lastlog 명령을 사용하여 사용자별 최근 로그인 시간 확인
    
    ```bash
    # kimcs 사용자의 로그인 기록 확인
    last kimcs
    
    # 모든 사용자의 최근 로그인 시간 확인
    sudo lastlog
    
    ```
    
- 계정 잠금 및 비활성화:
    - passwd -l 명령을 사용하여 계정 잠금
    - usermod -L 명령을 사용하여 계정 비활성화
    
    ```bash
    # kimcs 사용자 계정 잠금
    sudo passwd -l kimcs
    
    # kimcs 사용자 계정 비활성화
    sudo usermod -L kimcs
    
    ```
    
- 불필요한 계정 삭제:
    - userdel 명령을 사용하여 계정 삭제
    - r 옵션을 사용하여 홈 디렉토리까지 삭제
    
    ```bash
    # kimcs 사용자 계정 삭제 (홈 디렉토리 포함)
    sudo userdel -r kimcs
    
    ```
    

구성원 전용 계정에 대한 지속적인 모니터링과 관리가 필요합니다.
last와 lastlog 명령을 활용하여 사용자별 로그인 기록과 최근 로그인 시간을 확인함으로써,
의심스러운 로그인 활동을 탐지할 수 있습니다.
또한 passwd와 usermod 명령을 사용하여 계정을 잠금 또는 비활성화함으로써,
불필요하거나 의심스러운 계정의 접근을 차단할 수 있습니다.
더 이상 필요하지 않은 계정은 userdel 명령을 통해 삭제 처리하는 것이 좋습니다.

구성원 전용 계정의 생성 및 관리 프로세스를 문서화하고 체계화하는 것은
서버 관리자의 중요한 책임 중 하나입니다.
명확한 명명 규칙, 계정 생성 절차, 권한 관리 정책 등을 수립하고 준수함으로써,
사용자 계정 관리의 일관성과 보안성을 확보할 수 있을 것입니다.
# 교육용 계정

# 2.1.2. 교육용 계정

이 문서에서는 서버 관리자가 교육 목적으로 생성하고 관리하는 교육용 계정에 대해 자세히 다룹니다.
교육용 계정은 실습, 워크숍, 세미나 등의 교육 과정에서 참가자들이 서버 자원을 활용할 수 있도록 제공되는 임시 계정입니다.
교육용 계정의 효과적인 생성 및 관리를 통해 교육의 질을 높이고, 서버 보안을 유지할 수 있습니다.

## 2.1.2.1. 교육용 계정의 특징

- 임시성: 교육 기간 동안만 사용되는 한시적 계정
- 제한적 권한: 교육에 필요한 최소한의 권한만 부여
- 격리된 환경: 다른 사용자 및 시스템 리소스와 격리
- 통일된 명명 규칙: 교육 식별자와 사용자 식별자를 조합한 명명 규칙 사용

교육용 계정은 일반적인 사용자 계정과는 구분되는 특징을 가지고 있습니다.
이 계정들은 교육 기간 동안만 한시적으로 사용되며, 교육 종료 후에는 삭제 또는 비활성화됩니다.
교육 참가자들에게는 실습에 필요한 최소한의 권한만 부여하여, 시스템 리소스의 오용이나 보안 사고의 위험을 줄입니다.
또한 교육용 계정은 다른 사용자 및 시스템 리소스와 격리된 환경에서 운영되어, 상호 간섭을 최소화합니다.

## 2.1.2.2. 교육용 계정 명명 규칙

- 교육 식별자: 교육 코드 또는 약어 (예: ws01, sem02 등)
- 사용자 식별자: 사용자 번호 또는 이니셜 (예: 01, 02, ... / usr1, usr2 등)
- 계정명 형식: edu_[교육 식별자]_[사용자 식별자]
    - 예: edu_ws01_01, edu_sem02_usr1 등
- UID 및 GID 할당 규칙: 50000번대 (50000 ~ 59999)
- 홈 디렉토리 위치: /home/edu/[교육 식별자]/[사용자 식별자]

교육용 계정의 명명 규칙은 교육 식별자와 사용자 식별자를 조합하여 생성합니다.
교육 식별자는 해당 교육의 코드나 약어를 사용하며, 사용자 식별자는 사용자 번호 또는 이니셜을 사용할 수 있습니다.
계정명은 'edu_[교육 식별자]_[사용자 식별자]' 형식으로 구성되며,
UID와 GID는 50000번대에서 할당하여 일반 사용자 계정과 구분합니다.
각 교육용 계정의 홈 디렉토리는 '/home/edu/[교육 식별자]/[사용자 식별자]' 위치에 생성됩니다.

## 2.1.2.3. 교육용 계정 생성 절차

1. 교육용 계정 생성 스크립트 작성:
    
    ```bash
    #!/bin/bash
    
    edu_id="ws01"
    user_prefix="usr"
    start_uid=50000
    count=10
    
    for ((i=1; i<=count; i++)); do
        username="edu_${edu_id}_${user_prefix}${i}"
        uid=$((start_uid + i))
        home_dir="/home/edu/${edu_id}/${user_prefix}${i}"
    
        sudo useradd -m -u ${uid} -g ${uid} -d ${home_dir} -s /bin/bash ${username}
        sudo passwd -e ${username}
    done
    
    ```
    
2. 스크립트 실행을 통한 일괄 계정 생성:
    
    ```bash
    ./create_edu_accounts.sh
    
    ```
    
3. 참가자별 초기 비밀번호 설정:
    
    ```bash
    sudo passwd edu_ws01_usr1
    
    ```
    

교육용 계정의 생성은 스크립트를 작성하여 자동화하는 것이 효율적입니다.
위의 예시 스크립트는 'ws01' 교육에 대해 'usr1'부터 'usr10'까지의 10개 계정을 일괄 생성합니다.
계정 생성 시 useradd 명령을 사용하며, 홈 디렉토리 생성(-m), UID/GID 할당(-u/-g), 로그인 셸 지정(-s) 등의 옵션을 설정합니다.
또한 passwd -e 옵션을 사용하여 초기 비밀번호를 만료시킴으로써, 참가자의 첫 로그인 시 비밀번호 변경을 강제할 수 있습니다.

## 2.1.2.4. 교육용 계정 권한 관리

- 제한된 sudo 권한 부여:
    - 교육에 필요한 최소한의 명령어에 대해서만 sudo 권한 부여
    - /etc/sudoers.d/ 디렉토리에 교육별 설정 파일 생성
    
    ```bash
    # /etc/sudoers.d/edu_ws01 파일 생성
    Cmnd_Alias EDU_WS01_CMDS = /bin/ls, /bin/cat, /bin/cp, /bin/mv
    edu_ws01_usr1 ALL=(ALL) NOPASSWD: EDU_WS01_CMDS
    edu_ws01_usr2 ALL=(ALL) NOPASSWD: EDU_WS01_CMDS
    ...
    
    ```
    
- 리소스 제한 설정:
    - /etc/security/limits.conf 파일을 통해 교육용 계정의 리소스 사용 제한
    - CPU 시간, 메모리, 프로세스 수 등에 대한 제한 설정
    
    ```bash
    # /etc/security/limits.conf 파일 편집
    edu_ws01_usr1 hard cpu 60
    edu_ws01_usr1 hard rss 1048576
    edu_ws01_usr1 hard nproc 100
    ...
    
    ```
    

교육용 계정에는 교육 진행에 필요한 최소한의 권한만 부여하여야 합니다.
sudo 권한의 경우, 교육에 필요한 명령어들을 Cmnd_Alias로 정의하고 해당 계정에 대해서만 권한을 부여합니다.
또한 /etc/security/limits.conf 파일을 통해 CPU 시간, 메모리, 프로세스 수 등의 리소스 사용을 제한함으로써,
시스템 자원의 고갈이나 악용을 방지할 수 있습니다.

## 2.1.2.5. 교육용 계정 삭제 절차

1. 교육용 계정 삭제 스크립트 작성:
    
    ```bash
    #!/bin/bash
    
    edu_id="ws01"
    user_prefix="usr"
    count=10
    
    for ((i=1; i<=count; i++)); do
        username="edu_${edu_id}_${user_prefix}${i}"
        home_dir="/home/edu/${edu_id}/${user_prefix}${i}"
    
        sudo userdel -r ${username}
        sudo rm -rf ${home_dir}
    done
    
    ```
    
2. 스크립트 실행을 통한 일괄 계정 삭제:
    
    ```bash
    ./delete_edu_accounts.sh
    
    ```
    
3. 교육용 sudo 권한 설정 파일 삭제:
    
    ```bash
    sudo rm /etc/sudoers.d/edu_ws01
    
    ```
    

교육 종료 후에는 교육용 계정을 신속하게 삭제하여 불필요한 보안 위험을 제거해야 합니다.
계정 삭제 역시 스크립트를 작성하여 자동화할 수 있습니다.
userdel -r 명령을 사용하여 계정과 홈 디렉토리를 삭제하고,
교육용 sudo 권한 설정 파일도 함께 삭제합니다.

교육용 계정의 생성과 삭제, 권한 관리 등의 일련의 과정을 문서화하고 자동화하는 것은
서버 관리자의 업무 효율성을 높이고, 교육 환경의 안정성을 보장하는 데 도움이 됩니다.
명확한 명명 규칙, 체계적인 생성 및 삭제 절차, 적절한 권한 관리 정책 등을 수립하고 준수함으로써,
교육용 계정 관리의 품질과 보안성을 한층 더 높일 수 있을 것입니다.
# 네트워크 구성 (IP 주소, 게이트웨이, DNS 등)

# 1.3. 네트워크 구성 (IP 주소, 게이트웨이, DNS 등)

이 문서에서는 서버의 네트워크 구성에 대해 자세히 다룹니다.
네트워크 설정은 서버가 내부 네트워크 및 인터넷과 효과적으로 통신할 수 있도록 하는 데 필수적입니다.
서버 관리자는 IP 주소 할당, 라우팅, DNS 설정 등을 체계적으로 관리하여 네트워크 연결성과 보안을 보장해야 합니다.

## 1.3.1. 네트워크 인터페이스 구성

- 인터페이스 이름: ens33
- IP 주소: 147.46.62.42/24
- 네트워크 마스크: 255.255.255.0
- 게이트웨이: 147.46.62.1
- DNS 서버:
    - 147.46.80.1
    - 147.46.37.10

서버에는 ens33이라는 이름의 이더넷 인터페이스가 구성되어 있으며, 고정 IP 주소 147.46.62.42가 할당되어 있습니다.
서브넷 마스크는 255.255.255.0(/24)으로 설정되어, 총 254개의 호스트를 수용할 수 있는 서브넷에 속해 있습니다.
기본 게이트웨이는 147.46.62.1로 설정되어 있어, 이 주소로 외부 네트워크와의 통신이 라우팅됩니다.
DNS 서버로는 147.46.80.1과 147.46.37.10이 지정되어 있어, 도메인 이름 해석을 위해 이 서버들을 참조하게 됩니다.

## 1.3.2. /etc/network/interfaces 파일 설정

```
auto ens33
iface ens33 inet static
    address 147.46.62.42/24
    gateway 147.46.62.1

```

/etc/network/interfaces 파일은 네트워크 인터페이스의 IP 주소, 넷마스크, 게이트웨이 등의 설정을 저장하는 파일입니다.
위 설정에서는 ens33 인터페이스를 static 모드로 구성하고, IP 주소와 게이트웨이를 지정하였습니다.
이 파일의 설정은 시스템 부팅 시 자동으로 적용되며, ifup/ifdown 명령어를 통해 수동으로 인터페이스를 관리할 수도 있습니다.

## 1.3.3. /etc/resolv.conf 파일 설정

```
nameserver 147.46.80.1
nameserver 147.46.37.10

```

/etc/resolv.conf 파일은 DNS 서버의 IP 주소를 지정하는 파일입니다.
위 설정에서는 147.46.80.1과 147.46.37.10의 두 DNS 서버가 지정되어 있습니다.
이 파일의 설정은 시스템의 다양한 네트워크 서비스와 애플리케이션에서 참조되며, 도메인 이름을 IP 주소로 변환하는 데 사용됩니다.

## 1.3.4. 방화벽 설정

- 방화벽 솔루션: ufw (Uncomplicated Firewall)
- 주요 허용 포트:
    - SSH (22/tcp)
    - HTTP (80/tcp)
    - HTTPS (443/tcp)
    - MySQL (3306/tcp)
    - RStudio Server (8787/tcp)

서버의 보안을 강화하기 위해 ufw 방화벽이 사용되고 있습니다.
ufw는 간단하고 사용하기 쉬운 방화벽 솔루션으로, 서버에 대한 접근 제어를 효과적으로 수행할 수 있습니다.
위 설정에서는 SSH, HTTP, HTTPS, MySQL, RStudio Server 등의 핵심 서비스 포트만 허용하고, 그 외의 포트는 기본적으로 차단하도록 구성되어 있습니다.
이를 통해 불필요한 네트워크 접근을 제한하고, 서버의 공격 표면을 최소화할 수 있습니다.

## 1.3.5. 네트워크 보안 강화

- SSH 설정 강화:
    - 포트 변경 (기본 22번 포트에서 변경)
    - 루트 사용자의 SSH 접속 차단
    - 공개키 인증 사용 (비밀번호 인증 비활성화)
- SSL/TLS 인증서 적용:
    - Let's Encrypt를 통한 무료 인증서 발급
    - 자동 갱신 설정 (Certbot 사용)
- Fail2Ban을 통한 브루트 포스 공격 차단:
    - SSH, HTTP, HTTPS 등의 서비스에 대한 Fail2Ban 설정
    - 일정 횟수 이상 로그인 실패 시 해당 IP 차단

서버의 네트워크 보안을 한층 더 강화하기 위해 다양한 방안이 적용되어 있습니다.
먼저 SSH 설정을 강화하여 기본 포트를 변경하고, 루트 사용자의 직접 접속을 차단하였으며, 공개키 인증을 사용하도록 설정하였습니다.
웹 서비스에는 Let's Encrypt를 통해 발급받은 SSL/TLS 인증서를 적용하여 안전한 통신을 보장하고, Certbot을 사용하여 인증서의 자동 갱신을 설정하였습니다.
또한 Fail2Ban을 도입하여 SSH, HTTP, HTTPS 등의 주요 서비스에 대한 브루트 포스 공격을 탐지하고 차단할 수 있도록 하였습니다.

## 1.3.6. 네트워크 모니터링 및 분석

- 네트워크 트래픽 모니터링 도구:
    - iftop: 실시간 네트워크 트래픽 모니터링
    - nload: 네트워크 사용량 모니터링
    - vnstat: 장기간 네트워크 트래픽 통계 수집
- 패킷 캡처 및 분석 도구:
    - tcpdump: 네트워크 패킷 캡처
    - Wireshark: 패킷 분석 및 프로토콜 디코딩
- 네트워크 로깅 및 분석:
    - rsyslog를 통한 중앙 로그 수집
    - ELK 스택 (Elasticsearch, Logstash, Kibana)을 활용한 로그 분석 및 시각화

네트워크 성능 및 안정성을 유지하기 위해서는 지속적인 모니터링과 분석이 필수적입니다.
서버에는 다양한 네트워크 모니터링 도구가 설치되어 있어, 실시간 트래픽 모니터링부터 장기간 통계 수집까지 다양한 관점에서 네트워크 상황을 파악할 수 있습니다.
또한 tcpdump와 Wireshark 등의 도구를 활용하여 네트워크 패킷을 직접 캡처하고 분석할 수 있어, 네트워크 이슈 발생 시 원인 파악에 도움을 줄 수 있습니다.
아울러 rsyslog를 통해 중앙 집중식 로그 관리를 수행하고, ELK 스택을 활용하여 방대한 로그 데이터를 효과적으로 분석하고 시각화할 수 있는 환경을 갖추고 있습니다.

위에서 설명한 네트워크 구성 요소들은 서버의 원활한 네트워크 연결성, 보안성, 가용성을 보장하는 데 있어 핵심적인 역할을 합니다.
서버 관리자는 이러한 구성 요소들을 체계적으로 관리하고, 정기적인 점검과 분석을 통해 최적의 네트워크 환경을 유지해야 할 것입니다.
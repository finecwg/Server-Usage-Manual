# Docker Network

# 7.2.4. Docker Network

이 문서에서는 Docker 네트워크의 개념, 유형, 생성 및 관리 방법에 대해 자세히 설명합니다. Docker 네트워크는 컨테이너 간의 통신을 가능하게 하고, 컨테이너와 외부 네트워크와의 연결을 제공합니다. 브리지 네트워크, 호스트 네트워크, 논 네트워크 등 다양한 네트워크 유형과 이를 활용하는 방법, 사용자 정의 네트워크 생성, 컨테이너 간 통신 설정 등의 주제를 다룹니다.

## 7.2.4.1. Docker 네트워크 개요

### Docker 네트워크의 필요성

Docker 네트워크는 다음과 같은 필요성으로 인해 사용됩니다:

- 컨테이너 간의 통신: 애플리케이션이 여러 개의 컨테이너로 구성되어 있는 경우, 컨테이너 간 통신이 필요합니다.
- 외부와의 연결: 컨테이너가 외부 네트워크와 통신하기 위해서는 적절한 네트워크 설정이 필요합니다.
- 네트워크 격리: 보안 및 관리 목적으로 컨테이너를 서로 다른 네트워크에 배치하여 격리할 수 있습니다.

### Docker 네트워크의 유형

Docker에서 제공하는 기본 네트워크 유형은 다음과 같습니다:

- 브리지 네트워크 (Bridge Network): 기본 네트워크 유형으로, 컨테이너 간 통신을 위한 가상 네트워크를 생성합니다.
- 호스트 네트워크 (Host Network): 컨테이너가 호스트 시스템의 네트워크 스택을 직접 사용합니다.
- 논 네트워크 (None Network): 네트워크를 사용하지 않고 컨테이너를 실행합니다.

## 7.2.4.2. 브리지 네트워크

### 브리지 네트워크 개요

브리지 네트워크는 Docker에서 기본적으로 사용되는 네트워크 유형입니다. 브리지 네트워크는 컨테이너 간의 통신을 위한 가상 네트워크를 생성하며, 컨테이너는 이 가상 네트워크를 통해 서로 통신할 수 있습니다.

### 기본 브리지 네트워크

Docker는 설치 시 자동으로 `bridge`라는 이름의 기본 브리지 네트워크를 생성합니다. 모든 컨테이너는 기본적으로 이 브리지 네트워크에 연결됩니다.

### 사용자 정의 브리지 네트워크 생성

- 브리지 네트워크 생성:
    
    ```bash
    docker network create --driver bridge <네트워크 이름>
    
    ```
    

`docker network create` 명령어를 사용하여 사용자 정의 브리지 네트워크를 생성할 수 있습니다. `--driver` 옵션으로 브리지 네트워크를 지정하고, 네트워크 이름을 입력합니다.

### 컨테이너를 브리지 네트워크에 연결

- 컨테이너 생성 시 네트워크 연결:
    
    ```bash
    docker run --network <네트워크 이름> <이미지 이름>
    
    ```
    
- 실행 중인 컨테이너를 네트워크에 연결:
    
    ```bash
    docker network connect <네트워크 이름> <컨테이너 이름 또는 ID>
    
    ```
    

컨테이너 생성 시 `--network` 옵션을 사용하여 특정 브리지 네트워크에 연결할 수 있습니다. 또한 `docker network connect` 명령어를 사용하여 실행 중인 컨테이너를 브리지 네트워크에 연결할 수 있습니다.

## 7.2.4.3. 호스트 네트워크

### 호스트 네트워크 개요

호스트 네트워크는 컨테이너가 호스트 시스템의 네트워크 스택을 직접 사용하는 방식입니다. 컨테이너는 호스트의 네트워크 인터페이스를 공유하며, 호스트와 동일한 IP 주소를 가집니다.

### 호스트 네트워크 사용

- 컨테이너 생성 시 호스트 네트워크 사용:
    
    ```bash
    docker run --network host <이미지 이름>
    
    ```
    

컨테이너 생성 시 `--network host` 옵션을 사용하여 호스트 네트워크를 사용할 수 있습니다. 이 경우 컨테이너는 호스트의 네트워크 스택을 직접 사용하게 됩니다.

### 호스트 네트워크 사용 시 주의사항

호스트 네트워크를 사용할 때는 다음과 같은 주의사항이 있습니다:

- 포트 충돌: 컨테이너와 호스트가 동일한 포트를 사용하면 충돌이 발생할 수 있습니다.
- 보안 위험: 컨테이너가 호스트의 네트워크에 직접 액세스할 수 있으므로 보안 위험이 있습니다.

## 7.2.4.4. 논 네트워크

### 논 네트워크 개요

논 네트워크는 네트워크를 사용하지 않고 컨테이너를 실행하는 방식입니다. 컨테이너는 외부와 통신할 수 없으며, 다른 컨테이너와도 통신할 수 없습니다.

### 논 네트워크 사용

- 컨테이너 생성 시 논 네트워크 사용:
    
    ```bash
    docker run --network none <이미지 이름>
    
    ```
    

컨테이너 생성 시 `--network none` 옵션을 사용하여 논 네트워크를 사용할 수 있습니다. 이 경우 컨테이너는 외부와 완전히 격리된 상태로 실행됩니다.

## 7.2.4.5. 컨테이너 간 통신

### 동일한 네트워크에서의 컨테이너 간 통신

동일한 브리지 네트워크에 연결된 컨테이너는 서로 통신할 수 있습니다. 컨테이너는 서비스 이름 또는 컨테이너 이름을 사용하여 다른 컨테이너에 접근할 수 있습니다.

### 서로 다른 네트워크에서의 컨테이너 간 통신

서로 다른 브리지 네트워크에 연결된 컨테이너 간에는 직접 통신할 수 없습니다. 이 경우 컨테이너를 여러 네트워크에 동시에 연결하거나, 포트 포워딩을 사용하여 통신할 수 있습니다.

## 7.2.4.6. 외부와의 통신

### 포트 포워딩을 사용한 외부 통신

- 컨테이너 생성 시 포트 포워딩:
    
    ```bash
    docker run -p <호스트 포트>:<컨테이너 포트> <이미지 이름>
    
    ```
    

컨테이너 생성 시 `-p` 옵션을 사용하여 호스트의 포트와 컨테이너의 포트를 매핑할 수 있습니다. 이를 통해 외부에서 컨테이너의 서비스에 접근할 수 있습니다.

### Docker 네트워크 드라이버를 사용한 외부 통신

Docker는 다양한 네트워크 드라이버를 제공하여 외부와의 통신을 지원합니다. 대표적인 네트워크 드라이버는 다음과 같습니다:

- `overlay`: 여러 호스트에 걸쳐 분산된 네트워크를 생성합니다.
- `macvlan`: 컨테이너에 MAC 주소를 할당하여 물리적 네트워크에 직접 연결합니다.

이 문서에서는 Docker 네트워크의 개념, 유형, 생성 및 관리 방법에 대해 자세히 설명하였습니다. 브리지 네트워크, 호스트 네트워크, 논 네트워크 등 다양한 네트워크 유형과 이를 활용하는 방법, 사용자 정의 네트워크 생성, 컨테이너 간 통신 설정, 외부와의 통신 방법 등을 다루었습니다. 이 문서를 참조하여 Docker 네트워크를 효과적으로 구성하고 관리할 수 있을 것입니다.